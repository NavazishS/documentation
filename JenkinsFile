pipeline {
  agent {
    docker {
      image 'nawdocker/docker-curl:v1'
      args '--user root -v /var/run/docker.sock:/var/run/docker.sock'
    }
  }
  stages {
    stage('Get Host IP') {
      steps {
        script {
          def hostIp = sh(script: "ip route | awk 'NR==1 {print \$3}'", returnStdout: true).trim()
          echo "Host IP: ${hostIp}"
        }
      }
    }
  }
}

